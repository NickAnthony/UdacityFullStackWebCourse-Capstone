(this["webpackJsonpcasting-agency"]=this["webpackJsonpcasting-agency"]||[]).push([[0],{45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},99:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(22),i=c.n(s),r=(c(45),c(46),c(47),c(8)),o=c(6),l=(c(48),c(49),c(25)),u=c(26),j=c(30),b=c(29),m="https://nickanthony-casting-agency.herokuapp.com",d="https://image.flaticon.com/icons/png/512/2790/2790961.png",h="https://upload.wikimedia.org/wikipedia/en/b/b1/Portrait_placeholder.png",O=c(0),v=function(e){var t="/actors/".concat(e.actorId);return Object(O.jsx)(r.b,{to:t,style:{textDecoration:"none"},children:Object(O.jsxs)("div",{className:"Actor-row",children:[Object(O.jsx)("img",{src:e.imageSrc,alt:e.name+" Portait",width:"50"}),Object(O.jsx)("div",{className:"Actor-row-name",children:Object(O.jsx)("div",{children:e.name})})]},e.index)})},p=c(40),f=c.n(p),x=function(){return Object(O.jsx)("div",{className:"Loader-wrapper",children:Object(O.jsx)(f.a,{type:"Puff",color:"#4fc3f7",height:100,width:100})})},g=function(e){Object(j.a)(c,e);var t=Object(b.a)(c);function c(e){var n;return Object(l.a)(this,c),(n=t.call(this,e)).state={actors:[]},n}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;fetch(m+"/actors").then((function(e){return e.json()})).then((function(t){e.setState({actors:t.actors})}))}},{key:"render",value:function(){return void 0===this.state.actors||0===this.state.actors.length?Object(O.jsx)(x,{}):Object(O.jsxs)("div",{className:"Actor-column",children:[Object(O.jsx)("h2",{className:"Actor-column-header",children:"Actors & Actresses"}),Object(O.jsx)("h3",{className:"Column-header",children:"Available"}),this.state.actors.map((function(e,t){var c=h;return void 0!==e.portrait_url&&(c=e.portrait_url),Object(O.jsx)(v,{actorId:e.id,imageSrc:c,index:t,name:e.name},t)})),Object(O.jsx)("h3",{className:"Column-header",children:"Unavabilable"})]})}}]),c}(a.a.Component),N=function(e){var t="/".concat(e.type,"/").concat(e.id);return Object(O.jsx)(r.b,{to:t,style:{textDecoration:"none"},children:Object(O.jsxs)("div",{className:"Thumbnail",children:[Object(O.jsx)("img",{src:e.imageSrc,alt:e.title+" Image",height:"250"}),Object(O.jsx)("div",{className:"Thumbnail-text",children:Object(O.jsx)("div",{children:e.title})})]},e.index)})},w=function(e){Object(j.a)(c,e);var t=Object(b.a)(c);function c(e){var n;return Object(l.a)(this,c),(n=t.call(this,e)).state={movies:[]},n}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;fetch(m+"/movies").then((function(e){return e.json()})).then((function(t){e.setState({movies:t.movies})}))}},{key:"render",value:function(){return void 0===this.state.movies||0===this.state.movies.length?Object(O.jsx)(x,{}):Object(O.jsxs)("div",{className:"Movie-column-wrapper",children:[Object(O.jsx)("h2",{className:"Movie-column-header",children:"Movies"}),Object(O.jsx)("h3",{className:"Column-header",children:"Upcoming"}),Object(O.jsx)("div",{className:"Movie-column",children:this.state.movies.filter((function(e){return new Date<=new Date(e.release_date)})).map((function(e,t){var c=d;return void 0!==e.movie_photo&&(c=e.movie_photo),Object(O.jsx)(N,{id:e.id,type:"movies",index:t,imageSrc:c,title:e.title},t)}))}),Object(O.jsx)("h3",{className:"Column-header",children:"Released"}),Object(O.jsx)("div",{className:"Movie-column",children:this.state.movies.filter((function(e){return new Date>new Date(e.release_date)})).map((function(e,t){var c=d;return void 0!==e.movie_photo&&(c=e.movie_photo),Object(O.jsx)(N,{id:e.id,type:"movies",index:t,imageSrc:c,title:e.title},t)}))})]})}}]),c}(a.a.Component),P=function(){return Object(O.jsx)("div",{className:"Body-wrapper",children:Object(O.jsxs)("div",{className:"Column-wrapper",children:[Object(O.jsx)(g,{}),Object(O.jsx)(w,{})]})})},S=c(9),y=function(){var e=Object(S.b)().loginWithRedirect;return Object(O.jsx)("button",{className:"Button Menu-button",onClick:function(){return e()},children:"Log In"})},C=function(){var e=Object(S.b)().logout;return Object(O.jsx)("button",{className:"Button Menu-button",onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})},k=function(){return Object(O.jsxs)("div",{className:"App-header",children:[Object(O.jsx)(r.c,{to:"/",style:{textDecoration:"none"},children:Object(O.jsx)("h2",{children:"CASTING AGENCY"})}),Object(O.jsxs)("div",{className:"Menu",children:[Object(O.jsx)(r.b,{to:"/",className:"Button Menu-button",children:"Home"}),Object(O.jsx)(r.b,{to:"/new-actor",className:"Button Menu-button",children:"Add Actor"}),Object(O.jsx)(r.b,{to:"/new-movie",className:"Button Menu-button",children:"Add Movie"}),Object(O.jsx)(r.b,{to:"/profile",className:"Button Menu-button",children:"Profile"}),Object(O.jsx)(y,{}),Object(O.jsx)(C,{})]})]})},A=c(5),_=c.n(A),M=c(10),D=c(4);var F=function(){var e=Object(S.b)(),t=e.isAuthenticated,c=e.getAccessTokenSilently,a=Object(n.useState)(""),s=Object(D.a)(a,2),i=s[0],r=s[1],l=Object(n.useState)(h),u=Object(D.a)(l,2),j=u[0],b=u[1],d=Object(n.useState)(""),v=Object(D.a)(d,2),p=v[0],f=v[1],x=Object(n.useState)(0),g=Object(D.a)(x,2),N=g[0],w=g[1],P=Object(n.useState)(""),y=Object(D.a)(P,2),C=y[0],k=y[1],A=Object(n.useState)(""),F=Object(D.a)(A,2),B=F[0],T=F[1],I=function(){var e=Object(M.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({audience:"casting-agency",scope:"read:current_user"});case 3:t=e.sent,fetch(m+"/actors",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:p,age:N,gender:C,portrait_url:i})}).then((function(e){return e.json()})).then((function(e){e.success&&T("/actors/".concat(e.id))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return B?Object(O.jsx)(o.a,{to:B}):t?Object(O.jsx)("div",{className:"New-item-wrapper",children:Object(O.jsxs)("form",{className:"New-item-form-wrapper",onSubmit:function(e){e.preventDefault(),I()},children:[Object(O.jsx)("h1",{children:"New Actor"}),Object(O.jsx)("p",{className:"Form-label",children:"Name"}),Object(O.jsx)("input",{className:"Form-input",type:"text",value:p,onChange:function(e){return f(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Age"}),Object(O.jsx)("input",{className:"Form-input",type:"number",value:N,onChange:function(e){return w(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Gender"}),Object(O.jsx)("input",{className:"Form-input",type:"text",value:C,onChange:function(e){return k(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Portait Photo"}),Object(O.jsx)("input",{className:"Form-input",type:"url",value:i,onChange:function(e){r(e.target.value),e.target.value?b(e.target.value):b(h)}}),"\xa0",Object(O.jsx)("img",{src:j,alt:"".concat(p," Portait"),width:"100"}),!i&&Object(O.jsx)("p",{className:"Form-label",children:"Image will load with url"}),Object(O.jsx)("div",{className:"Submit-button-wrapper",children:Object(O.jsx)("input",{type:"submit",value:"Submit",className:"Button Submit-button"})})]})}):Object(O.jsx)("div",{className:"New-item-wrapper",children:Object(O.jsx)("h1",{children:"Please log in to add actors"})})},B=c(18),T=(c(33),function(){var e,t=Object(S.b)(),c=t.user,n=t.isAuthenticated,a=t.isLoading,s=t.error;return a?Object(O.jsx)(x,{}):n?Object(O.jsx)("div",{className:"User-profile",children:Object(O.jsxs)("div",{className:"User-profile-wrapper",children:[Object(O.jsx)("img",{src:c.picture,alt:c.name,height:"150"}),Object(O.jsxs)("div",{className:"User-profile-content",children:[Object(O.jsx)("h2",{children:"Name:"}),Object(O.jsx)("h4",{children:c.name}),Object(O.jsx)("h2",{children:"Email:"}),Object(O.jsx)("h4",{children:c.email})]})]})}):(s&&(e=s.message,Object(B.confirmAlert)({title:"Failed to authenticate.",message:e,buttons:[{label:"Ok",onClick:function(){}}]})),Object(O.jsxs)("div",{className:"User-profile",children:[Object(O.jsx)("img",{src:h,alt:"Portait",width:"100"}),Object(O.jsx)("h2",{children:"Please log in."})]}))}),I=c(19),E=function(e){return e.selected?Object(O.jsxs)("div",{className:"Thumbnail-selected",children:[Object(O.jsx)("img",{src:e.imageSrc,alt:e.title+" Image",height:"250"}),Object(O.jsx)("div",{className:"Thumbnail-text",children:Object(O.jsx)("div",{children:e.title})})]},e.index):Object(O.jsxs)("div",{className:"Thumbnail",children:[Object(O.jsx)("img",{src:e.imageSrc,alt:e.title+" Image",height:"250"}),Object(O.jsx)("div",{className:"Thumbnail-text",children:Object(O.jsx)("div",{children:e.title})})]},e.index)};var Y=function(e){var t=Object(n.useState)([]),c=Object(D.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!0),r=Object(D.a)(i,2),o=r[0],l=r[1],u=Object(n.useState)([]),j=Object(D.a)(u,2),b=j[0],h=j[1];Object(n.useEffect)((function(){o&&(fetch("".concat(m,"/movies")).then((function(e){return e.json()})).then((function(t){s(t.movies);var c=[];t.movies.forEach((function(t,n){t.actors.includes(e.actorId)&&(c=[].concat(Object(I.a)(c),[t]))})),h(c)})),l(!1))}),[o,a,b,e.actorId]);var v=function(e){return b.some((function(t){return t.id===e.id}))},p=function(){var e=Object(M.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t)?h(b.filter((function(e){return e.id!==t.id}))):h([].concat(Object(I.a)(b),[t]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){l(!0),e.showDialog(!1)};return o?Object(O.jsx)(x,{}):Object(O.jsx)("div",{className:"Profile-wrapper",children:Object(O.jsxs)("div",{className:"Profile-body",children:[Object(O.jsxs)("div",{className:"Profile-menu-horizontal",children:[Object(O.jsx)("button",{className:"Button Profile-menu-button-save",onClick:function(){e.commitActorAssociation(e.actorId,b),f()},children:"Save"}),Object(O.jsx)("button",{className:"Button Profile-menu-button-cancel",onClick:f,children:"Cancel"})]}),Object(O.jsxs)("h2",{children:["Select all movies that ",e.actorName," acted in or will act in."]}),Object(O.jsx)("div",{className:"Movie-column-wrapper",children:Object(O.jsx)("div",{className:"Movie-column",children:a.map((function(e,t){var c=d;return void 0!==e.movie_photo&&(c=e.movie_photo),Object(O.jsx)("div",{onClick:function(){p(e)},children:Object(O.jsx)(E,{id:e.id,index:t,imageSrc:c,title:e.title,selected:v(e)})},t)}))})})]})})};var z=function(e){var t=Object(n.useState)(e.actor.portrait_url),c=Object(D.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(e.actor.portrait_url),r=Object(D.a)(i,2),o=r[0],l=r[1],u=Object(n.useState)(e.actor.name),j=Object(D.a)(u,2),b=j[0],m=j[1],d=Object(n.useState)(e.actor.age),v=Object(D.a)(d,2),p=v[0],f=v[1],x=Object(n.useState)(e.actor.gender),g=Object(D.a)(x,2),N=g[0],w=g[1],P=function(){e.commitActorEdit(b,p,N,a),S()},S=function(){e.showDialog(!1)};return Object(O.jsx)("div",{className:"Profile-wrapper",children:Object(O.jsxs)("div",{className:"Profile-body",children:[Object(O.jsx)("form",{onSubmit:P,children:Object(O.jsxs)("div",{className:"Profile",children:[Object(O.jsx)("img",{src:o,alt:"".concat(b," Portait"),className:"Profile-photo"}),Object(O.jsxs)("div",{className:"Profile-content Profile-content-wide",children:[Object(O.jsx)("p",{className:"Form-label",children:"Name"}),Object(O.jsx)("input",{className:"Form-input",type:"text",value:b,onChange:function(e){return m(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Age"}),Object(O.jsx)("input",{className:"Form-input",type:"number",value:p,onChange:function(e){return f(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Gender"}),Object(O.jsx)("input",{className:"Form-input",type:"text",value:N,onChange:function(e){return w(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Portait Photo"}),Object(O.jsx)("input",{className:"Form-input",type:"url",value:a,onChange:function(e){s(e.target.value),e.target.value?l(e.target.value):l(h)}})]})]})}),Object(O.jsxs)("div",{className:"Profile-menu-horizontal",children:[Object(O.jsx)("button",{className:"Button Profile-menu-button-save",onClick:P,children:"Save"}),Object(O.jsx)("button",{className:"Button Profile-menu-button-cancel",onClick:S,children:"Cancel"})]})]})})};var J=function(){var e=Object(o.g)().id,t=Object(S.b)(),c=t.isAuthenticated,a=t.getAccessTokenSilently,s=Object(n.useState)(null),i=Object(D.a)(s,2),r=i[0],l=i[1],u=Object(n.useState)([]),j=Object(D.a)(u,2),b=j[0],v=j[1],p=Object(n.useState)(!0),f=Object(D.a)(p,2),g=f[0],w=f[1],P=Object(n.useState)(!1),y=Object(D.a)(P,2),C=y[0],k=y[1],A=Object(n.useState)(!1),F=Object(D.a)(A,2),T=F[0],I=F[1];Object(n.useEffect)((function(){g&&(fetch("".concat(m,"/actors/").concat(e,"/movies")).then((function(e){return e.json()})).then((function(e){console.log(e),void 0===e.actor.portrait_url&&(e.actor.portrait_url=h),l(e.actor),v(e.movies)})),w(!1))}),[g,e]);var E=function(){var e=Object(M.a)(_.a.mark((function e(t,c){var n,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b,e.prev=1,e.next=4,a({audience:"casting-agency",scope:"read:current_user"});case 4:s=e.sent,v(c),fetch("".concat(m,"/actors/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({movies:c.map((function(e){return e.id}))})}).then((function(e){return e.json()})).then((function(e){e.success?console.log(e):H(e.message,n)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message),H(e.t0.message,n);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,c){return e.apply(this,arguments)}}(),J=function(){var t=Object(M.a)(_.a.mark((function t(c,n,s,i){var o,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r,t.prev=1,t.next=4,a({audience:"casting-agency",scope:"read:current_user"});case 4:u=t.sent,l({name:c,age:n,gender:s,portrait_url:i,movies:r.movies}),fetch("".concat(m,"/actors/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(u),"Content-Type":"application/json"},body:JSON.stringify({name:c,age:n,gender:s,portrait_url:i})}).then((function(e){return e.json()})).then((function(e){e.success?console.log(e):U(e.message,o)})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message),U(t.t0.message,o);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,c,n,a){return t.apply(this,arguments)}}(),U=function(e,t){l(t),L(e)},H=function(e,t){v(t),L(e)},L=function(e){Object(B.confirmAlert)({title:"Failed to save changes!",message:e,buttons:[{label:"Ok",onClick:function(){}}]})};return r?T?Object(O.jsx)(z,{actor:r,showDialog:I,commitActorEdit:J}):C?Object(O.jsx)(Y,{actorName:r.name,actorId:r.id,showDialog:k,commitActorAssociation:E}):Object(O.jsx)("div",{className:"Profile-wrapper",children:Object(O.jsxs)("div",{className:"Profile-body",children:[Object(O.jsxs)("div",{className:"Profile",children:[Object(O.jsx)("img",{src:r.portrait_url,alt:r.name+" Portrait",className:"Profile-photo"}),Object(O.jsxs)("div",{className:"Profile-content",children:[Object(O.jsx)("p",{className:"Profile-name",children:r.name}),Object(O.jsxs)("h2",{children:[r.gender,", ",r.age]}),c&&Object(O.jsxs)("div",{className:"Profile-menu",children:[Object(O.jsx)("button",{className:"Button Profile-menu-button",onClick:function(){return k(!0)},children:"Update movies"}),Object(O.jsx)("button",{className:"Button Profile-menu-button",onClick:function(){return I(!0)},children:"Edit"}),Object(O.jsx)("button",{className:"Button Profile-menu-button-delete",onClick:function(){},children:"Delete actor"})]}),!c&&Object(O.jsx)("div",{className:"Profile-menu",children:Object(O.jsxs)("h4",{children:["Only Casting Directors or Executive Producers can make changes. ",Object(O.jsx)("br",{})," Please log in to edit."]})})]})]}),Object(O.jsxs)("div",{className:"Movie-column-wrapper",children:[Object(O.jsx)("h3",{className:"Column-header",children:"Upcoming"}),Object(O.jsx)("div",{className:"Movie-column",children:b.filter((function(e){return new Date<=new Date(e.release_date)})).map((function(e,t){var c=d;return void 0!==e.movie_photo&&(c=e.movie_photo),Object(O.jsx)(N,{id:e.id,type:"movies",index:t,imageSrc:c,title:e.title},t)}))}),Object(O.jsx)("h3",{className:"Column-header",children:"Released"}),Object(O.jsx)("div",{className:"Movie-column",children:b.filter((function(e){return new Date>new Date(e.release_date)})).map((function(e,t){var c=d;return void 0!==e.movie_photo&&(c=e.movie_photo),Object(O.jsx)(N,{id:e.id,type:"movies",index:t,imageSrc:c,title:e.title},t)}))})]})]})}):Object(O.jsx)(x,{})},U=c(28),H=c.n(U);var L=function(e){var t=Object(n.useState)(e.movie.title),c=Object(D.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(new Date(e.movie.release_date)),r=Object(D.a)(i,2),o=r[0],l=r[1],u=Object(n.useState)(e.movie.movie_photo),j=Object(D.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)(e.movie.movie_photo),v=Object(D.a)(h,2),p=v[0],f=v[1],x=function(){e.commitMovieEdit(a,o,b),g()},g=function(){e.showDialog(!1)};return Object(O.jsx)("div",{className:"Profile-wrapper",children:Object(O.jsxs)("div",{className:"Profile-body",children:[Object(O.jsx)("form",{onSubmit:x,children:Object(O.jsxs)("div",{className:"Profile",children:[Object(O.jsx)("img",{src:p,alt:"".concat(a," Poster"),className:"Profile-photo"}),Object(O.jsxs)("div",{className:"Profile-content Profile-content-wide",children:[Object(O.jsx)("p",{className:"Form-label",children:"Title"}),Object(O.jsx)("input",{className:"Form-input",type:"text",value:a,onChange:function(e){return s(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Release date"}),Object(O.jsx)(H.a,{onChange:l,value:o}),Object(O.jsx)("p",{className:"Form-label",children:"Movie Photo"}),Object(O.jsx)("input",{className:"Form-input",type:"url",value:p,onChange:function(e){m(e.target.value),e.target.value?f(e.target.value):f(d)}})]})]})}),Object(O.jsxs)("div",{className:"Profile-menu-horizontal",children:[Object(O.jsx)("button",{className:"Button Profile-menu-button-save",onClick:x,children:"Save"}),Object(O.jsx)("button",{className:"Button Profile-menu-button-cancel",onClick:g,children:"Cancel"})]})]})})};var R=function(e){var t=Object(n.useState)([]),c=Object(D.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!0),r=Object(D.a)(i,2),o=r[0],l=r[1],u=Object(n.useState)([]),j=Object(D.a)(u,2),b=j[0],d=j[1];Object(n.useEffect)((function(){o&&(fetch("".concat(m,"/actors")).then((function(e){return e.json()})).then((function(t){s(t.actors);var c=[];t.actors.forEach((function(t,n){t.movies.includes(e.movieId)&&(c=[].concat(Object(I.a)(c),[t]))})),d(c)})),l(!1))}),[o,a,b,e.movieId]);var v=function(e){return b.some((function(t){return t.id===e.id}))},p=function(){var e=Object(M.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t)?d(b.filter((function(e){return e.id!==t.id}))):d([].concat(Object(I.a)(b),[t]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){l(!0),e.showDialog(!1)};return o?Object(O.jsx)(x,{}):Object(O.jsx)("div",{className:"Profile-wrapper",children:Object(O.jsxs)("div",{className:"Profile-body",children:[Object(O.jsxs)("div",{className:"Profile-menu-horizontal",children:[Object(O.jsx)("button",{className:"Button Profile-menu-button-save",onClick:function(){e.commitActorAssociation(e.movieId,b),f()},children:"Save"}),Object(O.jsx)("button",{className:"Button Profile-menu-button-cancel",onClick:f,children:"Cancel"})]}),Object(O.jsxs)("h2",{children:["Select all actors/actresses that acted in or will act in ",e.movieTitle,"."]}),Object(O.jsx)("div",{className:"Movie-column-wrapper",children:Object(O.jsx)("div",{className:"Movie-column",children:a.map((function(e,t){var c=h;return void 0!==e.portrait_url&&(c=e.portrait_url),Object(O.jsx)("div",{onClick:function(){p(e)},children:Object(O.jsx)(E,{id:e.id,index:t,imageSrc:c,title:e.name,selected:v(e)},t)},t)}))})})]})})},G=c(17),W=c.n(G);var q=function(){var e=Object(o.g)().id,t=Object(S.b)(),c=t.isAuthenticated,a=t.getAccessTokenSilently;W.a.locale("en");var s=Object(n.useState)(null),i=Object(D.a)(s,2),r=i[0],l=i[1],u=Object(n.useState)([]),j=Object(D.a)(u,2),b=j[0],v=j[1],p=Object(n.useState)(!1),f=Object(D.a)(p,2),g=f[0],w=f[1],P=Object(n.useState)(!1),y=Object(D.a)(P,2),C=y[0],k=y[1],A=Object(n.useState)(!1),F=Object(D.a)(A,2),T=F[0],I=F[1];Object(n.useEffect)((function(){g||(fetch("".concat(m,"/movies/").concat(e,"/actors")).then((function(e){return e.json()})).then((function(e){console.log(e),void 0===e.movie.movie_photo&&(e.movie.movie_photo=d),l(e.movie),v(e.actors)})),w(!0))}),[g,e]);var E=function(){var e=Object(M.a)(_.a.mark((function e(t,c){var n,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b,e.prev=1,e.next=4,a({audience:"casting-agency",scope:"read:current_user"});case 4:s=e.sent,v(c),fetch("".concat(m,"/movies/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({actors:c.map((function(e){return e.id}))})}).then((function(e){return e.json()})).then((function(e){e.success?console.log(e):J(e.message,n)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message),J(e.t0.message,n);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,c){return e.apply(this,arguments)}}(),Y=function(){var t=Object(M.a)(_.a.mark((function t(c,n,s){var i,o,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r,t.prev=1,t.next=4,a({audience:"casting-agency",scope:"read:current_user"});case 4:o=t.sent,u=W()(n.toString()).format("YYYY-MM-DD"),l({title:c,release_date:u,movie_photo:s,actors:r.actors}),fetch("".concat(m,"/movies/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify({title:c,release_date:u})}).then((function(e){return e.json()})).then((function(e){e.success?console.log(e):z(e.message,i)})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.message),z(t.t0.message,i);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,c,n){return t.apply(this,arguments)}}(),z=function(e,t){l(t),U(e)},J=function(e,t){v(t),U(e)},U=function(e){Object(B.confirmAlert)({title:"Failed to save changes!",message:e,buttons:[{label:"Ok",onClick:function(){}}]})};return r?T?Object(O.jsx)(L,{movie:r,showDialog:I,commitMovieEdit:Y}):C?Object(O.jsx)(R,{movieTitle:r.title,movieId:r.id,showDialog:k,commitActorAssociation:E}):Object(O.jsx)("div",{className:"Profile-wrapper",children:Object(O.jsxs)("div",{className:"Profile-body",children:[Object(O.jsxs)("div",{className:"Profile",children:[Object(O.jsx)("img",{src:r.movie_photo,alt:r.title+" Poster Photo",className:"Profile-photo"}),Object(O.jsxs)("div",{className:"Profile-content",children:[Object(O.jsx)("p",{className:"Profile-name",children:r.title}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Release date:"}),Object(O.jsx)("h2",{children:W()(r.release_date).format("MMMM Do, YYYY")})]}),c&&Object(O.jsxs)("div",{className:"Profile-menu",children:[Object(O.jsx)("button",{className:"Button Profile-menu-button",onClick:function(){return k(!0)},children:"Cast actors/actresses"}),Object(O.jsx)("button",{className:"Button Profile-menu-button",onClick:function(){return I(!0)},children:"Edit"}),Object(O.jsx)("button",{className:"Button Profile-menu-button-delete",onClick:function(){},children:"Delete"})]}),!c&&Object(O.jsx)("div",{className:"Profile-menu",children:Object(O.jsxs)("h4",{children:["Only Casting Directors or Executive Producers can make changes. ",Object(O.jsx)("br",{})," Please log in to edit."]})})]})]}),Object(O.jsxs)("div",{className:"Movie-column-wrapper",children:[Object(O.jsx)("h3",{className:"Column-header",children:"Actors/Actresses"}),Object(O.jsx)("div",{className:"Movie-column",children:b.map((function(e,t){var c=h;return void 0!==e.portrait_url&&(c=e.portrait_url),Object(O.jsx)(N,{id:e.id,type:"actors",index:t,imageSrc:c,title:e.name},t)}))})]})]})}):Object(O.jsx)(x,{})};var K=function(){var e=Object(S.b)(),t=e.isAuthenticated,c=e.getAccessTokenSilently;W.a.locale("en");var a=Object(n.useState)(null),s=Object(D.a)(a,2),i=s[0],r=s[1],l=Object(n.useState)(d),u=Object(D.a)(l,2),j=u[0],b=u[1],h=Object(n.useState)(""),v=Object(D.a)(h,2),p=v[0],f=v[1],x=Object(n.useState)(new Date),g=Object(D.a)(x,2),N=g[0],w=g[1],P=Object(n.useState)(""),y=Object(D.a)(P,2),C=y[0],k=y[1],A=function(){var e=Object(M.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({audience:"casting-agency",scope:"read:current_user"});case 3:t=e.sent,n=W()(N.toString()).format("YYYY-MM-DD"),console.log(JSON.stringify({title:p,releaseDate:n,movie_photo:i})),fetch(m+"/movies",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({title:p,releaseDate:n,movie_photo:i})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&k("/movies/".concat(e.id))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return C?Object(O.jsx)(o.a,{to:C}):t?Object(O.jsx)("div",{className:"New-item-wrapper",children:Object(O.jsxs)("form",{className:"New-item-form-wrapper",onSubmit:function(e){e.preventDefault(),A()},children:[Object(O.jsx)("h1",{children:"New Movie"}),Object(O.jsx)("p",{className:"Form-label",children:"Title"}),Object(O.jsx)("input",{className:"Form-input",type:"text",value:p,onChange:function(e){return f(e.target.value)}}),Object(O.jsx)("p",{className:"Form-label",children:"Release date"}),Object(O.jsx)(H.a,{onChange:w,value:N}),Object(O.jsx)("p",{className:"Form-label",children:"Portait Photo"}),Object(O.jsx)("input",{className:"Form-input",type:"url",value:i,onChange:function(e){r(e.target.value),e.target.value?b(e.target.value):b(d)}}),"\xa0",Object(O.jsx)("img",{src:j,alt:"".concat(p," Poster"),width:"100"}),!i&&Object(O.jsx)("p",{className:"Form-label",children:"Image will load with url"}),Object(O.jsx)("div",{className:"Submit-button-wrapper",children:Object(O.jsx)("input",{type:"submit",value:"Submit",className:"Button Submit-button"})})]})}):Object(O.jsx)("div",{className:"New-item-wrapper",children:Object(O.jsxs)("form",{className:"New-item-form-wrapper",children:[Object(O.jsx)("h1",{children:"New Movie"}),Object(O.jsx)("h2",{children:"Only Executive Producers can add movies.  Please log in to continue."})]})})};var Q=function(){return Object(O.jsx)(r.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(k,{}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/new-actor",children:Object(O.jsx)(F,{})}),Object(O.jsx)(o.b,{path:"/new-movie",children:Object(O.jsx)(K,{})}),Object(O.jsx)(o.b,{path:"/profile",children:Object(O.jsx)(T,{})}),Object(O.jsx)(o.b,{path:"/actors/:id",children:Object(O.jsx)(J,{})}),Object(O.jsx)(o.b,{path:"/movies/:id",children:Object(O.jsx)(q,{})}),Object(O.jsx)(o.b,{path:"/",children:Object(O.jsx)(P,{})})]})]})})},V=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,101)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(S.a,{domain:"fsnd-app-nickanthony.us.auth0.com",clientId:"ExP2mxHo4wAMYB0MGc9nmWHxSHcfO1eu",redirectUri:window.location.origin+"/profile",audience:"casting-agency",scope:"read:current_user update:current_user_metadata",children:Object(O.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[99,1,2]]]);
//# sourceMappingURL=main.d569cc1f.chunk.js.map